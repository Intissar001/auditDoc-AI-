<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>

<HBox fx:id="topbar"
      xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.yourapp.controller.TopbarController"
      prefHeight="60"
      spacing="18"
      alignment="CENTER_LEFT"
      stylesheets="@../css/Topbar.css"
      styleClass="topbar">

    <padding>
        <Insets left="22" right="22"/>
    </padding>

    <!-- LOGO + APP NAME -->
    <HBox alignment="CENTER_LEFT" spacing="12">
        <children>
            <ImageView fx:id="topLogo"
                       fitWidth="48"
                       fitHeight="48"
                       preserveRatio="true"/>
            <Label fx:id="topAppName"
                   text="AuditDoc AI"
                   styleClass="top-app-name"/>
        </children>
    </HBox>

    <Region HBox.hgrow="ALWAYS"/>

    <!-- SEARCH BAR -->
    <HBox alignment="CENTER_LEFT" prefWidth="400" styleClass="search-bar">
        <children>
            <Label styleClass="search-icon" text="ðŸ”"/>
            <TextField fx:id="searchField"
                       promptText="Search audit, document, or dossier..."
                       styleClass="search-field"
                       HBox.hgrow="ALWAYS"/>
        </children>
    </HBox>

    <!-- RIGHT SECTION -->
    <HBox alignment="CENTER_RIGHT" spacing="16">

        <Button text="+ Lancer un Nouvel Audit"
                fx:id="btnNewAudit"
                styleClass="btn-primary"
                prefHeight="36"/>

        <!-- NOTIFICATION -->
        <StackPane fx:id="notificationWrapper">
            <Button fx:id="btnNotifications"
                    text="ðŸ””"
                    styleClass="icon-btn"
                    prefWidth="36"
                    prefHeight="36"/>

            <!-- BADGE -->
            <Circle fx:id="notificationBadge"
                    radius="5"
                    fill="#ff4d4d"
                    translateX="10"
                    translateY="-10"
                    visible="false"/>
        </StackPane>

        <Button text="ðŸŒ" styleClass="icon-btn" prefWidth="36" prefHeight="36"/>
        <Button text="â˜€" styleClass="icon-btn" prefWidth="36" prefHeight="36"/>

        <!-- USER MENU -->
        <HBox fx:id="userMenu" alignment="CENTER" spacing="10" styleClass="user-menu">
            <children>
                <Circle fx:id="avatarCircle" radius="12" fill="#007bff"/>
                <VBox alignment="CENTER_LEFT">
                    <children>
                        <Label fx:id="userName" styleClass="user-name" text="Utilisateur Test"/>
                        <Label fx:id="userRole" styleClass="user-role" text="Administrateur"/>
                    </children>
                </VBox>
            </children>
        </HBox>

    </HBox>

</HBox>
