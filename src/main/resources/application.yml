# ========================================
# üöÄ SPRING BOOT CONFIGURATION
# ========================================

spring:
  main:
    web-application-type: NONE
    banner-mode: console
    lazy-initialization: false

  # ================================
  # üìß EMAIL CONFIGURATION
  # ================================
  mail:
    host: smtp.gmail.com
    port: 587
    username: aichaelkhddar03@gmail.com # to change after to support_auditdocai@gmail.com (the association should create it, or if they already have their own email they can use it, or Intissar's email ; as she's the IT committee chef)
    password: ftvdiawbiywcoikl  # it's a password app given by google (u should enable 2-Step Verification first)
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

  # ================================
  # üìä DATABASE CONFIGURATION
  # ================================
  datasource:
    url: jdbc:postgresql://aws-1-eu-west-1.pooler.supabase.com:6543/postgres?pgbouncer=true
    username: postgres.ziyevqgoffoejasscxyg
    password: WcDmGFscwNTZL6pY

    hikari:
      auto-commit: false  # CRITICAL FIX
      maximum-pool-size: 10
      minimum-idle: 2
      idle-timeout: 30000
      max-lifetime: 120000
      connection-timeout: 30000
      validation-timeout: 5000
      leak-detection-threshold: 60000
      connection-test-query: SELECT 1
      data-source-properties:
        socketTimeout: 30000
        connectTimeout: 10000
        tcpKeepAlive: true
        prepareThreshold: 0

  # ================================
  # üóÑÔ∏è JPA/HIBERNATE CONFIGURATION
  # ================================
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: update  # CHANGED from 'update' to 'validate'
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        jdbc:
          batch_size: 20
          fetch_size: 50
        connection:
          provider_disables_autocommit: true
        transaction:
          jta:
            platform: org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform

  # ================================
  # üìÅ FILE UPLOAD CONFIGURATION
  # ================================
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

  sql:
    init:
      mode: never

# ========================================
# ü§ñ AI CONFIGURATION
# ========================================

ai:
  ollama:
    base-url: http://localhost:11434
    model: llama3
    timeout: 300000

  provider: ollama
  max-tokens: 2000
  temperature: 0.7

# ========================================
# üìù LOGGING CONFIGURATION
# ========================================

logging:
  level:
    com.yourapp: INFO
    org.springframework: INFO
    org.hibernate.SQL: WARN  # CHANGED from DEBUG to WARN
    org.hibernate.type: WARN
    com.zaxxer.hikari: INFO  # CHANGED from DEBUG to INFO

  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

  file:
    name: logs/auditdoc-ai.log

# ========================================
# ‚öôÔ∏è APPLICATION CONFIGURATION
# ========================================

app:
  name: AuditDoc AI
  version: 1.0.0
  base-url: http://localhost:8080

  upload:
    max-files: 10
    allowed-extensions: .pdf,.doc,.docx,.xls,.xlsx
    temp-dir: temp/uploads/

  audit:
    max-concurrent-audits: 3
    timeout-minutes: 5

# ========================================
# üîß SERVER CONFIGURATION (optional)
# ========================================

server:
  port: 8080
  shutdown: graceful

